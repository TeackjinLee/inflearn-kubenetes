<img width="1576" height="900" alt="image" src="https://github.com/user-attachments/assets/cc1a2dfc-408b-49b5-9079-cca1a16a6c69" /># 파드(Pod)로 띄운 프로그램에 접속이 안 되는 이유

### ✅ 파드(Pod)로 띄운 프로그램에 접속이 안 되는 이유

<img width="2010" height="1326" alt="image" src="https://github.com/user-attachments/assets/02128aee-0087-47d2-87b4-4cb95460c88f" />

<img width="1530" height="878" alt="image" src="https://github.com/user-attachments/assets/70027e6a-e84a-485d-ae3f-10a2ba22e563" />

- 도커에 대해서 공부했을 때는 컨테이너 내부와 컨테이너 외부의 네트워크가 서로 독립적으로 분리되어 있다. 하지만 쿠버네티스에서는 **파드(Pod) 내부의 네트워크를 컨테이너가 공유해서 같이 사용**한다.
- **파드(Pod)의 네트워크는 로컬 컴퓨터의 네트워크와는 독립적으로 분리**되어 있다. 이 때문에 파드(Pod)로 띄운 Nginx에 아무리 요청을 보내도 응답이 없던 것이다.

따라서 Nginx가 띄우는 웹 페이지에 접근하려면 2가지 방법이 있다. 

1. 파드(Pod) 내부로 들어가서 접근하기
2. 파드(Pod)의 내부 네트워크를 외부에서도 접속할 수 있도록 포트 포워딩(= 포트 연결시키기) 활용하기

하나씩 알아보자. 

### ✅ 파드(Pod) 내부로 들어가서 Nginx로 요청보내기

파드(Pod) 내부로 접속해 Nginx로 요청을 보냈을 때, Nginx가 띄운 웹 페이지를 잘 응답하는 지 확인해보자.

```yaml
# kubectl exec -it [파드명] -- bash
# 도커에서 컨테이너로 접속하는 명령어(docker exec -it [컨테이너 ID] bash)와 비슷하다. 
$ kubectl exec -it nginx-pod -- bash # nginx-pod 내부 환경으로 접속

# ---Pod 내부---
$ curl localhost:80 # Nginx로 요청보내기
```

<img width="1248" height="966" alt="image" src="https://github.com/user-attachments/assets/e5925f27-9ca0-4433-81ba-f72b7ed7e998" />

쿠버네티스에서는 **파드(Pod) 내부의 네트워크를 컨테이너가 공유해서 같이 사용**하기 때문에, 파드로 접속해서 Nginx로 요청을 보냈을 때 정상적으로 응답이 날라온 것이다. 

<img width="1530" height="878" alt="image" src="https://github.com/user-attachments/assets/1d1dab4f-8e2b-4d7a-81f4-f1aae981d232" />

### ✅ 포트 포워딩을 활용해 Nginx로 요청보내기

<img width="1576" height="900" alt="image" src="https://github.com/user-attachments/assets/39d731dd-bdcc-4364-a109-83e9d9669092" />

 아래 명령어를 통해 포트 포워딩을 활용해 로컬 환경에서도 Nginx로 접속할 수 있게 만들어보자. 

```yaml
# kubectl port-forward pod/[파드명] [로컬에서의 포트]/[파드에서의 포트]
$ sudo kubectl port-forward pod/nginx-pod 80:80
```

**[curl로 요청 보낸 결과]**

<img width="1254" height="922" alt="image" src="https://github.com/user-attachments/assets/f449bf29-b40f-4c05-aefe-2d7552997cf5" />

**[크롬으로 접속한 결과]**

<img width="1648" height="824" alt="image" src="https://github.com/user-attachments/assets/c93726f8-2ad3-48bb-84a7-edef15bb5480" />

### ✅ 파드 삭제하기

```bash
# kubectl delete pod [파드명]
$ kubectl delete pod nginx-pod # nginx-pod라는 파드 삭제

$ kubectl get pods # 파드가 잘 삭제됐는 지 확인
```
