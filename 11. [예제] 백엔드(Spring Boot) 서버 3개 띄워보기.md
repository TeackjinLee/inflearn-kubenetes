# [예제] 백엔드(Spring Boot) 서버 3개 띄워보기

### ✅ 백엔드(Spring Boot) 서버 3개 띄워보기

<aside>
🧑🏻‍🏫

실제 서비스를 운영하다보면 트래픽이 증가해서 서버가 버벅거리는 경우가 생긴다. 이 때는 서버를 수평적 확장(서버의 개수를 늘리는 방식)을 통해 해결한다. 이런 상황을 가정해 백엔드 서버인 Spring Boot 서버를 3대로 늘려보자.

</aside>

1. **Spring Boot 프로젝트 셋팅**
    
    [start.spring.io](https://start.spring.io/)
    
<img width="2048" height="1054" alt="image" src="https://github.com/user-attachments/assets/aee8703d-5ce4-42cc-807d-227fdfe3df53" />
    

1. **간단한 코드 작성**
    
    **AppController**
    
    ```java
    @RestController
    public class AppController {
      @GetMapping("/")
      public String home() {
        System.out.println("Hello, World!"); // 추후 디버깅용
        return "Hello, World!";
      }
    }
    ```
    
2. **프로젝트 실행시켜보기**
    
<img width="1214" height="1056" alt="image" src="https://github.com/user-attachments/assets/6782e06e-9aef-424c-ad16-27a4eb65206b" />
    
<img width="640" height="292" alt="image" src="https://github.com/user-attachments/assets/07d2f57d-17d6-400f-8088-8553c16b76ba" />
    
3. **Dockerfile 작성하기**
    
    **Dockerfile**
    
    ```docker
    FROM openjdk:17-jdk
    
    COPY build/libs/*SNAPSHOT.jar app.jar
    
    ENTRYPOINT ["java", "-jar", "/app.jar"]
    ```
    
4. **Spring Boot 프로젝트 빌드하기**
    
    ```bash
    $ ./gradlew clean build
    ```
    
5. **Dockerfile을 바탕으로 이미지 빌드하기**
    
    ```bash
    $ docker build -t spring-server .
    ```
    
6. **이미지가 잘 생성됐는 지 확인하기**
    
    ```bash
    $ docker image ls
    ```
    
7. **매니페스트 파일 작성하기**
    
    **spring-pod.yaml**
    
    ```
    apiVersion: v1
    kind: Pod
    metadata:
      name: spring-pod**-1**
    spec:
      containers:
        - name: spring-container
          image: spring-server
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080
          
    **---**
    apiVersion: v1
    kind: Pod
    metadata:
      name: spring-pod**-2**
    spec:
      containers:
        - name: spring-container
          image: spring-server
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080
          
    
    **---**
    apiVersion: v1
    kind: Pod
    metadata:
      name: spring-pod**-3**
    spec:
      containers:
        - name: spring-container
          image: spring-server
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080
    ```
    
8. **매니페스트 파일을 기반으로 파드(Pod) 생성하기**
    
    ```yaml
    $ kubectl apply -f spring-pod.yaml
    ```
    
9. **파드(Pod)가 잘 생성됐는 지 확인**
    
    ```yaml
    $ kubectl get pods
    ```
    
<img width="1516" height="288" alt="image" src="https://github.com/user-attachments/assets/f8058572-ee64-4a6f-aa25-073f4792be89" />
    

> 3개의 Spring Boot 서버를 띄우는 데 성공했다. 서버가 3개여서 망정이지 만약 100개의 서버를 띄워야 한다면 불편하지 않을까? 그리고 서비스를 운영하다보면 시간, 계절, 이벤트 등에 따라 트래픽은 시시각각 변한다. 그럴 때마다 트래픽에 맞게 서버의 대수를 바꿔야 한다면 아주 불편할 것이다. 

이런 불편함을 해결해주는 쿠버네티스의 기능이 **디플로이먼트(Deployment)**이다. 다음 강의에서 디플로이먼트에 대해 자세히 알아보자.
>
