# [예제] 서비스(Service)를 활용해 백엔드(Spring Boot) 서버와 통신해보기

### ✅ 서비스(Service)를 활용해 백엔드(Spring Boot)와 통신해보기

<aside>
🧑🏻‍🏫

이전 강의에서 디플로이먼트를 활용해 백엔드 서버(Spring Boot) 3개를 띄웠었다. 하지만 디플로이먼트에 포함되어 있는 모든 파드에 골고루 요청을 분배하기 위해 서비스(Service)를 생성해야 한다. 

([[예제] 디플로이먼트를 활용해 백엔드(Spring Boot) 서버 3개 띄워보기](https://www.notion.so/Spring-Boot-3-12b11062ff0780729defc6656446cdb3?pvs=21) )

</aside>

1. **매니페스트 파일 추가하기**
    
    **spring-service.yaml**
    
    ```bash
    apiVersion: v1
    kind: Service
    
    # Service 기본 정보
    metadata:
      name: spring-service # Service 이름
      
    # Service 세부 정보
    spec:
      type: NodePort # Service의 종류
      selector:
        app: backend-app # 실행되고 있는 파드 중 'app: backend-app'이라는 값을 가진 파드와 서비스를 연결
      ports:
        - protocol: TCP # 서비스에 접속하기 위한 프로토콜
          port: 8080 # 쿠버네티스 내부에서 Service에 접속하기 위한 포트 번호
          targetPort: 8080 # 매핑하기 위한 파드의 포트 번호
          nodePort: 30000 # 외부에서 사용자들이 접근하게 될 포트 번호
    ```
    
    - `Service` 종류에 대해 한 번 짚고 넘어가자. 우선 아래 3가지 개념에 대해서만 이해하고 넘어가자.
        - `NodePort` : 쿠버네티스 내부에서 해당 서비스에 접속하기 위한 포트를 열고 **외부에서 접속 가능**하도록 한다.
        - `ClusterIP` : 쿠버네티스 내부에서만 통신할 수 있는 IP 주소를 부여. 외부에서는 요청할 수 없다.
        - `LoadBalancer` : 외부의 로드밸런서(AWS의 로드밸런서 등)를 활용해 외부에서 접속할 수 있도록 연결한다.
    
  <img width="1588" height="1494" alt="image" src="https://github.com/user-attachments/assets/53a86bb4-2687-4934-9a20-97057810be7f" />
    

1. **매니페스트 파일을 기반으로 서비스(Service) 생성하기**
    
    ```bash
    $ kubectl apply -f spring-service.yaml 
    ```
    

1. **서비스가 잘 생성됐는 지 확인**
    
    ```yaml
    $ kubectl get service
    ```
    
  <img width="1680" height="232" alt="image" src="https://github.com/user-attachments/assets/bfae3efa-7d6c-400c-82a8-55023e8fee97" />
    
2. **잘 접속되는 지 확인**
    
  <img width="696" height="274" alt="image" src="https://github.com/user-attachments/assets/0950d880-85f1-4cc4-a792-1181426f603f" />
