# [예제] 백엔드(Nest.js) 서버를 파드(Pod)로 띄워보기

### ✅ 백엔드(Nest.js) 서버를 파드(Pod)로 띄워보기

1. **Nest.js 프로젝트 만들기**
    
    ```bash
    # Nest CLI 설치
    $ npm i -g @nestjs/cli
    
    # nest new {프로젝트명}
    $ nest new nest-server
    ```
    

1. **프로젝트 실행시켜보기**
    
    ```bash
    $ npm i
    $ npm run start
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e35a8144-c5ff-40f0-b123-384a331e35bb/75732fca-29c2-4c76-9f2d-7d3f9f6776f4/image.png)
    
2. **Dockerfile 작성하기**
    
    **Dockerfile**
    
    ```docker
    FROM node
    
    WORKDIR /app
    
    COPY . .
    
    RUN npm install
    
    RUN npm run build
    
    EXPOSE 3000
    
    ENTRYPOINT [ "node", "dist/main.js" ]
    ```
    
3. **.dockerignore 작성하기**
    
    **.dockerignore**
    
    ```jsx
    node_modules
    ```
    
4. **Dockerfile을 바탕으로 이미지 빌드하기**
    
    ```bash
    $ docker build -t nest-server .
    ```
    
5. **이미지가 잘 생성됐는 지 확인하기**
    
    ```bash
    $ docker image ls
    ```
    
6. **매니페스트 파일 작성하기**
    
    **nest-pod.yaml**
    
    ```bash
    apiVersion: v1
    kind: Pod
    metadata:
      name: nest-pod
    spec:
      containers:
        - name: nest-container
          image: nest-server
          imagePullPolicy: IfNotPresent
    ```
    
7. **매니페스트 파일을 기반으로 파드(Pod) 생성하기**
    
    ```yaml
    $ kubectl apply -f nest-pod.yaml 
    ```
    
8. **파드(Pod)가 잘 생성됐는 지 확인**
    
    ```yaml
    $ kubectl get pods
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e35a8144-c5ff-40f0-b123-384a331e35bb/a833ecda-6ba0-43f1-9ff9-9f36db61207a/image.png)
    
9. **포트 포워딩으로 Nest.js 서버가 실행됐는 지 확인**
    
    ```bash
    $ kubectl port-forward nest-pod 3000:3000
    ```
    
    ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/e35a8144-c5ff-40f0-b123-384a331e35bb/75732fca-29c2-4c76-9f2d-7d3f9f6776f4/image.png)
    

1. **파드 삭제하기**
    
    ```bash
    $ kubectl delete pod nest-pod
    ```
